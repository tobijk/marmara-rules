<?xml version="1.0" encoding="utf-8"?>
<rules>

    <prepare>
    <![CDATA[

cd $XPACK_SOURCE_DIR/eglibc
mv linuxthreads/* libc
mv ports libc

    ]]>
    </prepare>

    <build>
    <![CDATA[

SCRIPT_DIR="$XPACK_BASE_DIR/script"

NATIVE_ARCH="`$SCRIPT_DIR/config.guess`"
XTOOLS_ARCH="`echo $NATIVE_ARCH | sed -e 's/-[^-]*/-cross/'`"
TARGET_ARCH="i686-pc-linux-gnu"
TARGET_NAME="`echo $TARGET_ARCH | sed 's/\([^-]*\).*/\1/'`"

STAGE1_DIR="$XPACK_BASE_DIR/stage1"
STAGE2_DIR="$XPACK_BASE_DIR/stage2"

SYSTEM_ROOT="$XPACK_BASE_DIR/sysroot"

export CFLAGS="$CFLAGS -fno-stack-protector -U_FORTIFY_SOURCE"
export PATH="$STAGE1_DIR/$TARGET_NAME/bin:$STAGE1_DIR/$TARGET_NAME/sbin:$PATH"

. $SCRIPT_DIR/create-dirs.sh
. $SCRIPT_DIR/binutils-pass1.sh
. $SCRIPT_DIR/gcc-pass1.sh
. $SCRIPT_DIR/kernel-headers.sh
. $SCRIPT_DIR/glibc-headers.sh
. $SCRIPT_DIR/gcc-pass2.sh
. $SCRIPT_DIR/glibc.sh
. $SCRIPT_DIR/gcc-pass3.sh
. $SCRIPT_DIR/ncurses.sh
. $SCRIPT_DIR/zsh.sh
. $SCRIPT_DIR/binutils-pass2.sh

    ]]>
    </build>

    <install>
    <![CDATA[

    ]]>
    </install>

    <clean>
    <![CDATA[

rm -fr "$XPACK_SOURCE_DIR" "$XPACK_BUILD_DIR" "$XPACK_INSTALL_DIR"
rm -fr "$XPACK_BASE_DIR/sysroot" "$XPACK_BASE_DIR/stage1"

    ]]>
    </clean>

</rules>
